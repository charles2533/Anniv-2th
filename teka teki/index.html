<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teka-Teki Harian</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .mono-font {
            font-family: 'Share Tech Mono', monospace;
        }
        .clue-container {
            transition: all 0.5s ease-in-out;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
        }
        .clue-container.visible {
            max-height: 1000px; /* Cukup besar untuk menampung konten */
            opacity: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .audio-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
        }
        .audio-btn {
            background: #0891b2;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .audio-btn:hover {
            background: #0e7490;
        }
        .audio-btn:disabled {
            background: #374151;
            cursor: not-allowed;
        }
        .progress-bar {
            flex: 1;
            height: 4px;
            background: #374151;
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #06b6d4;
            width: 0%;
            transition: width 0.1s;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl bg-gray-800 rounded-2xl shadow-lg p-8 space-y-4">
        <header class="text-center border-b border-gray-700 pb-4">
            <h1 class="text-3xl font-bold text-cyan-400 mono-font">Pesan Tersembunyi</h1>
            <p class="text-gray-400">Petunjuk baru akan terbuka setiap hari.</p>
        </header>

        <main class="space-y-2">
            <!-- Petunjuk 1: Hari Pertama -->
            <div id="clue-1" class="clue-container bg-gray-700/50 p-6 rounded-lg">
                <h2 class="text-xl font-bold text-cyan-300 mono-font">PETUNJUK 1</h2>
                <p class="text-gray-300 mb-4">Pseudonim lagu membentuk sebuah kata.</p>
                
                <!-- Audio Controls -->
                <div class="audio-controls">
                    <button id="prevBtn" class="audio-btn">⏮️</button>
                    <button id="playPauseBtn" class="audio-btn">▶️</button>
                    <button id="nextBtn" class="audio-btn">⏭️</button>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <span id="timeDisplay" class="text-sm text-gray-400 mono-font">0:00 / 0:00</span>
                </div>
                
                <!-- Playlist -->
                <div id="playlist" class="mt-4 bg-gray-800 rounded-lg p-3">
                    <div class="text-sm text-cyan-300 mb-2 mono-font">PLAYLIST:</div>
                    <div id="songList" class="space-y-1 text-sm text-gray-400">
                        <!-- Daftar lagu akan muncul di sini -->
                    </div>
                </div>
            </div>

            <!-- Petunjuk 2: Hari Kedua -->
            <div id="clue-2" class="clue-container bg-gray-700/50 p-6 rounded-lg">
                <h2 class="text-xl font-bold text-cyan-300 mono-font">PETUNJUK 2</h2>
                <p class="text-gray-300 mb-4">Bagian selanjutnya adalah...</p>
                <div class="bg-gray-900 p-4 rounded-lg text-center">
                    <p class="text-4xl font-bold text-green-400 mono-font tracking-widest">.id/</p>
                </div>
            </div>

            <!-- Petunjuk 3: Kuis Harian (mulai hari ketiga) -->
            <div id="clue-3" class="clue-container bg-gray-700/50 p-6 rounded-lg">
                <h2 class="text-xl font-bold text-cyan-300 mono-font">PETUNJUK 3</h2>
                <p class="text-gray-300 mb-4">Selesaikan tantangan berikut untuk menemukan kata kunci terakhir. Satu soal setiap hari.</p>
                <div id="quiz-container" class="space-y-6">
                    <!-- Soal-soal kuis akan muncul di sini -->
                </div>
            </div>
            
            <!-- Pesan jika belum waktunya -->
            <div id="wait-message" class="text-center p-6 bg-gray-700/50 rounded-lg hidden">
                 <p class="text-gray-400">Belum ada petunjuk baru hari ini. Silakan kembali lagi besok!</p>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- KONFIGURASI ---
            // Atur tanggal dimulainya teka-teki di sini (Tahun, Bulan-1, Tanggal)
            const startDate = new Date(2025, 7, 2); // 1 September 2025

            const quizData = [
                { question: "Gedung tertinggi di Surabaya?", answer: "Tunjungan Plaza 6" },
                { question: "Siapa nama rektor UK Petra saat ini (2025)?", answer: "Djwantoro Hardjito" },
                { question: "Apa nama jembatan yang menghubungkan Surabaya dan Madura?", answer: "Suramadu" },
                { question: "Monumen ikonik Surabaya yang berbentuk ikan dan buaya?", answer: "Suroboyo" },
                { question: "Di jalan apa kampus UK Petra berada?", answer: "Siwalankerto" },
                { question: "Tahun berapa UK Petra didirikan?", answer: "1961" },
                { question: "Apa warna khas dari almamater UK Petra?", answer: "Biru" },
            ];

            // Data lagu untuk audio player
            // GANTI dengan file audio Anda yang sudah diupload ke server
            const songs = [
                { title: "Lagu 1", artist: "Artist 1", file: "audio/P.mp3" },
                { title: "Lagu 2", artist: "Artist 2", file: "audio/E.mp3" },
                { title: "Lagu 3", artist: "Artist 3", file: "audio/T.mp3" },
                { title: "Lagu 4", artist: "Artist 4", file: "audio/R.mp3" },
                { title: "Lagu 5", artist: "Artist 5", file: "audio/A.mp3" }
            ];
            // --- AKHIR KONFIGURASI ---

            const today = new Date();
            // Reset time to beginning of day for accurate date comparison
            const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const startDateStart = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
            
            const timeDiff = todayStart.getTime() - startDateStart.getTime();
            const daysPassed = Math.floor(timeDiff / (1000 * 3600 * 24));

            const clue1 = document.getElementById('clue-1');
            const clue2 = document.getElementById('clue-2');
            const clue3 = document.getElementById('clue-3');
            const quizContainer = document.getElementById('quiz-container');
            const waitMessage = document.getElementById('wait-message');

            // Audio player elements
            const prevBtn = document.getElementById('prevBtn');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const nextBtn = document.getElementById('nextBtn');
            const progressFill = document.getElementById('progressFill');
            const timeDisplay = document.getElementById('timeDisplay');
            const songList = document.getElementById('songList');

            // Audio player state
            let currentSong = 0;
            let isPlaying = false;
            let audio = new Audio();
            let audioInterval;

            // Initialize audio
            audio.preload = 'metadata';
            audio.addEventListener('loadedmetadata', () => {
                updateProgress();
            });
            audio.addEventListener('timeupdate', () => {
                updateProgress();
            });
            audio.addEventListener('ended', () => {
                next();
            });

            // Initialize playlist
            function initPlaylist() {
                songList.innerHTML = '';
                songs.forEach((song, index) => {
                    const songDiv = document.createElement('div');
                    songDiv.className = `cursor-pointer p-2 rounded ${index === currentSong ? 'bg-cyan-600/30 text-cyan-300' : 'hover:bg-gray-700'}`;
                    songDiv.innerHTML = `<span class="font-medium">${song.title}</span> <span class="text-gray-500">- ${song.artist}</span>`;
                    songDiv.addEventListener('click', () => {
                        currentSong = index;
                        updatePlaylist();
                        if (isPlaying) {
                            play();
                        }
                    });
                    songList.appendChild(songDiv);
                });
            }

            function updatePlaylist() {
                const songDivs = songList.children;
                Array.from(songDivs).forEach((div, index) => {
                    if (index === currentSong) {
                        div.className = 'cursor-pointer p-2 rounded bg-cyan-600/30 text-cyan-300';
                    } else {
                        div.className = 'cursor-pointer p-2 rounded hover:bg-gray-700';
                    }
                });
            }

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            function updateProgress() {
                const currentTime = audio.currentTime || 0;
                const duration = audio.duration || 0;
                const percentage = duration > 0 ? (currentTime / duration) * 100 : 0;
                progressFill.style.width = percentage + '%';
                timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
            }

            function loadSong() {
                audio.src = songs[currentSong].file;
                audio.load();
                updatePlaylist();
            }

            function play() {
                if (!audio.src) {
                    loadSong();
                }
                audio.play().then(() => {
                    isPlaying = true;
                    playPauseBtn.textContent = '⏸️';
                }).catch(error => {
                    console.log('Audio play failed:', error);
                    // Fallback ke simulasi jika file tidak ditemukan
                    isPlaying = true;
                    playPauseBtn.textContent = '⏸️';
                    audioInterval = setInterval(() => {
                        if (audio.currentTime < audio.duration) {
                            updateProgress();
                        } else {
                            next();
                        }
                    }, 1000);
                });
            }

            function pause() {
                isPlaying = false;
                playPauseBtn.textContent = '▶️';
                audio.pause();
                clearInterval(audioInterval);
            }

            function next() {
                pause();
                currentSong = (currentSong + 1) % songs.length;
                loadSong();
                updateProgress();
            }

            function prev() {
                pause();
                if (audio.currentTime > 3) {
                    audio.currentTime = 0;
                } else {
                    currentSong = (currentSong - 1 + songs.length) % songs.length;
                    loadSong();
                }
                updateProgress();
            }

            // Audio controls event listeners
            playPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    pause();
                } else {
                    play();
                }
            });

            nextBtn.addEventListener('click', next);
            prevBtn.addEventListener('click', prev);

            let cluesAvailable = 0;

            // Menampilkan Petunjuk 1 (Hari ke-1 / daysPassed >= 0)
            if (daysPassed >= 0) {
                clue1.classList.add('visible');
                cluesAvailable++;
                initPlaylist();
                loadSong();
                updateProgress();
            }

            // Menampilkan Petunjuk 2 (Hari ke-2 / daysPassed >= 1)
            if (daysPassed >= 1) {
                clue2.classList.add('visible');
                cluesAvailable++;
            }

            // Menampilkan Petunjuk 3 dan soal kuis (Mulai Hari ke-3 / daysPassed >= 2)
            if (daysPassed >= 2) {
                clue3.classList.add('visible');
                cluesAvailable++;
                
                // Hitung jumlah soal yang harus ditampilkan
                // Hari ke-3 (daysPassed=2) -> 1 soal
                // Hari ke-4 (daysPassed=3) -> 2 soal, dst.
                const questionsToShow = Math.min(daysPassed - 1, quizData.length);
                
                for (let i = 0; i < questionsToShow; i++) {
                    const questionItem = quizData[i];
                    
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'border-t border-gray-600 pt-4';

                    const questionLabel = document.createElement('label');
                    questionLabel.htmlFor = `question-${i}`;
                    questionLabel.className = 'block mb-2 text-gray-300';
                    questionLabel.textContent = `Soal Hari ke-${i + 3}: ${questionItem.question}`;
                    
                    const inputGroup = document.createElement('div');
                    inputGroup.className = 'flex space-x-2';

                    const inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.id = `question-${i}`;
                    inputField.className = 'w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500 text-white';
                    inputField.placeholder = 'Ketik jawabanmu...';

                    const checkButton = document.createElement('button');
                    checkButton.textContent = 'Cek';
                    checkButton.className = 'bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-md transition-colors';
                    
                    const resultSpan = document.createElement('span');
                    resultSpan.id = `result-${i}`;
                    resultSpan.className = 'mt-2 block text-sm font-medium';

                    inputGroup.appendChild(inputField);
                    inputGroup.appendChild(checkButton);

                    questionDiv.appendChild(questionLabel);
                    questionDiv.appendChild(inputGroup);
                    questionDiv.appendChild(resultSpan);

                    quizContainer.appendChild(questionDiv);

                    checkButton.addEventListener('click', () => {
                        const userAnswer = inputField.value.trim().toLowerCase();
                        const correctAnswer = questionItem.answer.trim().toLowerCase();
                        
                        if (userAnswer === correctAnswer) {
                            resultSpan.textContent = 'Benar!';
                            resultSpan.className = 'mt-2 block text-sm font-medium text-green-400';
                            inputField.disabled = true;
                            checkButton.disabled = true;
                            inputField.classList.add('border-green-500');
                        } else {
                            resultSpan.textContent = 'Salah, coba lagi.';
                            resultSpan.className = 'mt-2 block text-sm font-medium text-red-400';
                        }
                    });

                    // Allow Enter key to submit answer
                    inputField.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            checkButton.click();
                        }
                    });
                }
            }
            
            // Handle cases where puzzle hasn't started or no new clues today
            if (daysPassed < 0) {
                waitMessage.classList.remove('hidden');
                waitMessage.textContent = `Teka-teki akan dimulai pada ${startDateStart.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' })}.`;
            } else if (cluesAvailable === 0) {
                waitMessage.classList.remove('hidden');
                waitMessage.textContent = `Belum ada petunjuk baru hari ini. Silakan kembali lagi besok!`;
            }

            // Debug info (bisa dihapus di production)
            console.log(`Days passed: ${daysPassed}`);
            console.log(`Clues available: ${cluesAvailable}`);
            console.log(`Start date: ${startDateStart.toLocaleDateString('id-ID')}`);
            console.log(`Today: ${todayStart.toLocaleDateString('id-ID')}`);
        });
    </script>
</body>
</html>